<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>China JS</title>
  <meta name="author" content="萝卜先生">
  
  <meta name="description" content="javascript">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="China JS"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="China JS" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">China JS</a></h1>
  <h2><a href="/">blog</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">存档</a></li>
    
<li> <a href="/atom.xml">RSS</a> </li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-06-20T06:34:24.000Z"><a href="/2014/06/20/post10/">6月 20 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/06/20/post10/">原生javascript实现放大镜功能</a></h1>
  

    </header>
    <div class="entry">
      
        <p>看了一下jquery的放大镜插件jqzoom感觉效果很好，功能和兼容性很好，使用起来很简便但是代码量有些大，感觉没有必要写成那么复杂。所以简单的实现了一个用原生javascript写的一个放大镜功能，代码量并不多，但是功能类似。同时，因为是自己写的，很精简，需要改动也很方便。下面附源码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
</pre></td><td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> &gt;</span><span class="javascript">
      window.onload=<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> img=document.getElementById(<span class="string">"img"</span>);
    <span class="keyword">var</span> big=document.getElementById(<span class="string">"big"</span>);
    <span class="keyword">var</span> fu=document.getElementById(<span class="string">"fu"</span>);
    <span class="keyword">var</span> tt=document.getElementById(<span class="string">"test"</span>);
    tt.onmouseover=test;
        <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span>{</span>
        big.style.backgroundImage=<span class="string">"url('http://pic1.win4000.com/wallpaper/d/4fceae14904d7.jpg')"</span>;
        <span class="keyword">var</span> mouse=document.createElement(<span class="string">"div"</span>);
        mouse.className=<span class="string">"mouse"</span>;
        fu.appendChild(mouse);
        document.onmousemove=<span class="function"><span class="keyword">function</span><span class="params">(ev)</span>{</span>
            tt.onmouseover=<span class="literal">null</span>;
            <span class="keyword">var</span> oEvent=ev||event;
            <span class="keyword">var</span> scrollTop=document.documentElement.scrollTop||document.body.scrollTop;
            <span class="keyword">var</span> scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;
            mouse.style.left=oEvent.clientX+scrollLeft-<span class="number">50</span>+<span class="string">'px'</span>;
            mouse.style.top=oEvent.clientY+scrollTop-<span class="number">50</span>+<span class="string">'px'</span>;
            big.style.backgroundPosition=(-oEvent.clientX-scrollLeft+<span class="built_in">parseInt</span>(img.offsetLeft)+<span class="number">50</span>)*<span class="number">2</span>+<span class="string">"px "</span>+(-oEvent.clientY-scrollTop+<span class="built_in">parseInt</span>(img.offsetTop)+<span class="number">50</span>)*<span class="number">2</span>+<span class="string">"px"</span>;
            tt.onmouseout=<span class="function"><span class="keyword">function</span><span class="params">(e)</span>{</span>
                big.style.backgroundImage=<span class="string">""</span>;
                fu.removeChild(mouse);
                document.onmousemove=<span class="literal">null</span>;
                tt.onmouseover=test;
            }
        }
    }
}

    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
    <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css">
        <span class="id">#big</span><span class="rules">{
            <span class="rule"><span class="attribute">background-repeat</span>:<span class="value"> no-repeat</span></span>;
            <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">200</span>px</span></span>;
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">200</span>px</span></span>;
            <span class="rule"><span class="attribute">background-position</span>:<span class="value"> -<span class="number">50</span>px -<span class="number">50</span>px</span></span>;
            <span class="rule"><span class="attribute">background-size</span>:<span class="value"> <span class="number">1000</span>px <span class="number">1000</span>px</span></span>;
            <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;
        <span class="rule">}</span></span>
        <span class="tag">img</span><span class="rules">{
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">500</span>px</span></span>;
            <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">500</span>px</span></span>;
            <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;
            <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;
            <span class="rule"><span class="attribute">left</span>:<span class="value"><span class="number">0</span>px</span></span>;
            <span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">0</span>px</span></span>;
        <span class="rule">}</span></span>
        <span class="class">.mouse</span><span class="rules">{
            <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">100</span>px</span></span>;
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100</span>px</span></span>;
            <span class="rule"><span class="attribute">border</span>:<span class="value">red <span class="number">2</span>px solid</span></span>;
            <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span></span></span>;
            <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
            <span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">10</span></span></span>;
        <span class="rule">}</span></span>
        <span class="id">#fu</span><span class="rules">{
            <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;
            <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;
        <span class="rule">}</span></span>
        <span class="id">#test</span><span class="rules">{
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">500</span>px</span></span>;
            <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">500</span>px</span></span>;
            <span class="rule"><span class="attribute">position</span>:<span class="value">absolute</span></span>;
            <span class="rule"><span class="attribute">left</span>:<span class="value"><span class="number">0</span>px</span></span>;
            <span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">0</span>px</span></span>;
            <span class="rule"><span class="attribute">background</span>:<span class="value"><span class="function">rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span></span></span>;
            <span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">100</span></span></span>;
        <span class="rule">}</span></span>
    </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"fu"</span>&gt;</span>
<span class="tag">&lt;<span class="title">img</span> <span class="attribute">id</span>=<span class="value">"img"</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/d/4fceae14904d7.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"test"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"big"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<p><a href="/big.html">点击显示演示效果</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-06-17T07:10:20.000Z"><a href="/2014/06/17/post9/">6月 17 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/06/17/post9/">图片展示————自动放大</a></h1>
  

    </header>
    <div class="entry">
      
        <p>在看一些图站的时候，在浏览图片时经常会感到图片太小，打开图片又太费劲。所以想到写这样一个小东西，鼠标移入的时候，图片会自动放大，移除之后也会变回原来的尺寸，同时为了用户体验加了点小小的动画。很简单。下面是源码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
</pre></td><td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css">
        <span class="tag">div</span><span class="rules">{
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">200</span>px</span></span>;
            <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">200</span>px</span></span>;

            <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;
            <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">50</span>px</span></span>;
        <span class="rule">}</span></span>
        <span class="tag">img</span><span class="rules">{
            <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;
            <span class="rule"><span class="attribute">left</span>:<span class="value"><span class="number">0</span>px</span></span>;
        <span class="rule">}</span></span>

    </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> &gt;</span><span class="javascript">
    <span class="comment">/**
 * Created by lenovo on 14-6-17.
 */</span>
window.onload=<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> imgs=document.getElementsByTagName(<span class="string">"img"</span>);
    <span class="keyword">var</span> l=imgs.length;
    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;l;i++){
       <span class="keyword">var</span> width=window.getComputedStyle? window.getComputedStyle(imgs[i].parentNode , <span class="literal">null</span>)[<span class="string">'width'</span>]:imgs[i].parentNode.currentStyle[<span class="string">'width'</span>];
       <span class="keyword">var</span> height=window.getComputedStyle? window.getComputedStyle(imgs[i].parentNode , <span class="literal">null</span>)[<span class="string">'height'</span>]:imgs[i].parentNode.currentStyle[<span class="string">'height'</span>];
       imgs[i].style.width=width;
       imgs[i].style.height=height;
        imgs[i].style.left=<span class="string">"0px"</span>;
        imgs[i].style.top=<span class="string">"0px"</span>;
       imgs[i].onmouseover=<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
           <span class="keyword">this</span>.style.zIndex=<span class="number">10</span>;
            test.call(<span class="keyword">this</span>);
           <span class="keyword">this</span>.onmouseout=<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
               clearTimeout(settime);
               <span class="keyword">this</span>.style.zIndex=<span class="number">0</span>;
               <span class="keyword">this</span>.style.height=width;
               <span class="keyword">this</span>.style.width=height;
               <span class="keyword">this</span>.style.left=<span class="string">"0px"</span>;
               <span class="keyword">this</span>.style.top=<span class="string">"0px"</span>;
               <span class="keyword">this</span>.onmouseout=<span class="literal">null</span>;
           }
       };
    }
}
<span class="keyword">var</span> settime
<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> this1=<span class="keyword">this</span>;
    <span class="keyword">if</span>(<span class="built_in">parseInt</span>(this1.style.width)==<span class="number">300</span>){
        <span class="keyword">return</span>;
    };
   this1.style.width=<span class="number">5</span>+<span class="built_in">parseInt</span>(this1.style.width)+<span class="string">"px"</span>;
    this1.style.height=<span class="number">5</span>+<span class="built_in">parseInt</span>(this1.style.height)+<span class="string">"px"</span>;
    this1.style.left=-<span class="number">2.5</span>+<span class="built_in">parseInt</span>(this1.style.left)+<span class="string">"px"</span>;
    this1.style.top=-<span class="number">2.5</span>+<span class="built_in">parseInt</span>(this1.style.top)+<span class="string">"px"</span>;
   settime= setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>test.call(this1)},<span class="number">10</span>)
}
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/d/4fceae14904d7.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/c/4fceae1e53532.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/d/4fceae14904d7.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0px"</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0px"</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0px"</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0px"</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0px"</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0px"</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<p><a href="ss/img">演示地址</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-06-10T10:17:44.000Z"><a href="/2014/06/10/post8/">6月 10 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/06/10/post8/">jQuery系列--轮播</a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="jQuery系列-轮播">jQuery系列-轮播</h3>
<p>经过前辈指点，准备近期写一些作品，找工作的时候也许会用的上，最近忙考试忙的头疼，所以就从简单的开始，首先是花了点时间写了个一个轮播图。网上轮播图的jquery插件很多，在这我先简单的用show()hide()两个动画效果进行尝试，后续会有动画效果上的更新。<br>下面附源码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
</pre></td><td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"http://code.jquery.com/jquery-2.1.1.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"main.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
    <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css">
        *<span class="rules">{
            <span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span>px</span></span>;
            <span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span>px</span></span>;
        <span class="rule">}</span></span>
        <span class="tag">ul</span>,<span class="tag">li</span><span class="rules">{<span class="rule"><span class="attribute">list-style</span>:<span class="value">none</span></span>;<span class="rule">}</span></span>
        <span class="id">#fu</span><span class="rules">{
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">500</span>px</span></span>;
            <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300</span>px</span></span>;
            <span class="rule"><span class="attribute">border</span>:<span class="value">red <span class="number">1</span>px solid</span></span>;
            <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;
        <span class="rule">}</span></span>
        <span class="id">#num</span><span class="rules">{
            <span class="rule"><span class="attribute">position</span>:<span class="value">absolute</span></span>;
            <span class="rule"><span class="attribute">right</span>:<span class="value"><span class="number">0</span>px</span></span>;
            <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">0</span>px</span></span>;<span class="rule">;</span>
        <span class="rule">}</span></span>
        <span class="id">#num</span> <span class="tag">a</span><span class="rules">{
            <span class="rule"><span class="attribute">display</span>:<span class="value">block</span></span>;
            <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;
            <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">20</span>px</span></span>;
            <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1</span>px red solid</span></span>;
            <span class="rule"><span class="attribute">text-decoration</span>:<span class="value"> none</span></span>;<span class="rule">;</span>
        <span class="rule">}</span></span>

    </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"fu"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">id</span>=<span class="value">"lun"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/d/4fceae14904d7.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/4/4fceae15aa560.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/9/4fceae1ada3e0.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://pic1.win4000.com/wallpaper/c/4fceae1e53532.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>/&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"num"</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="comment">/**
     * Created by lenovo on 14-6-13.
     */</span>
    $(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        <span class="keyword">var</span> i = <span class="number">0</span>, j, attr = [],
            slide = $(<span class="string">'#lun'</span>),
            li = slide.find(<span class="string">'li'</span>),
            img = slide.find(<span class="string">'img'</span>);

        img.css({ width : <span class="number">500</span>, height : <span class="number">300</span>});
        li.css({position : <span class="string">"absolute"</span>, left : <span class="string">"0px"</span>, top : <span class="string">"0px"</span>});

        li.hide().eq(<span class="number">0</span>).show();
        li.each(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
            attr.push($(<span class="keyword">this</span>));
        });

        <span class="function"><span class="keyword">function</span> <span class="title">showandhide</span><span class="params">()</span>{</span>
            attr[i].show(<span class="number">2000</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
                attr[i].css(<span class="string">"display"</span>, <span class="string">"block"</span>).css(<span class="string">"z-index"</span>, <span class="string">"-1"</span>);
                <span class="keyword">var</span> tt = attr.splice(i, <span class="number">1</span>);
                <span class="comment">// alert(tt);</span>
                console.log(attr);
                $.each(attr, <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
                    $(<span class="keyword">this</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>).css(<span class="string">"z-index"</span>, <span class="string">"0"</span>);
                });
                attr.splice(i, <span class="number">0</span>, tt[<span class="number">0</span>]);
                console.log(attr);

                i++;
                <span class="keyword">if</span>(i == <span class="number">4</span>)i = <span class="number">0</span>;
            });
        }

        <span class="function"><span class="keyword">function</span> <span class="title">lunbo</span><span class="params">()</span>{</span>
            <span class="keyword">return</span> setInterval(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
                showandhide();
            }, <span class="number">2500</span>);
        }

        <span class="keyword">var</span> test = lunbo();
        <span class="comment">// clearInterval(test);</span>
        $(<span class="string">"#num a"</span>).click(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
            <span class="comment">// alert(test);</span>
            attr[i].stop(<span class="literal">true</span>, <span class="literal">true</span>);
            clearInterval(test);
            <span class="comment">//alert($(this).text());</span>
            i = $(<span class="keyword">this</span>).text() - <span class="number">1</span>;
            showandhide(i);
            $(<span class="string">"#lun"</span>)[<span class="number">0</span>].onmouseout = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
                test = lunbo();
                $(<span class="string">"#lun"</span>)[<span class="number">0</span>].onmouseout = <span class="literal">null</span>;
            }
        });


    });


</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<p><a href="/">点击查看演示效果</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-05-26T02:00:40.000Z"><a href="/2014/05/26/post7/">5月 26 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/05/26/post7/">Cookie篇</a></h1>
  

    </header>
    <div class="entry">
      
        <p>周末百度笔试，问了一个cookie的问题，我SB的蒙住了，于是乎，似乎是跪掉了，回来后总结了下Cooke的相关问题。</p>
<h3 id="获取cookie">获取cookie</h3>
<p>javascript中对cookie的接口操作方法就是利用document.cookie来进行的，获取cookie的方法如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">var</span> str = document.cookie;
</pre></td></tr></table></figure>

<p>需要注意的是，cookie保存到字符串是经过URL编码的，所以使用时需要进行解码。</p>
<h3 id="创建cookie">创建cookie</h3>
<p>与获取cookie方法相同，创建cookie依旧使用document.cookie，下面举一个简单的例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>document.cookie=<span class="string">"name1=value1;name2=value2"</span>;
</pre></td></tr></table></figure>

<p>如例子中所看到的，cookie的格式是一个个名值对组成，并由分号分隔开。</p>
<h3 id="删除cookie">删除cookie</h3>
<p>javascript中并没有直接删除cookie的方法，所以只能通过从新设置cookie，并将cookie的失效时间调整为已经过去的事件，从而达到删除cookie的方法。<br>以下是高程三中的cookie方法整合：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="code"><pre><span class="keyword">var</span> CookieUtil = {

    get: <span class="function"><span class="keyword">function</span> <span class="params">(name)</span>{</span><span class="comment">//获取cookie</span>
        <span class="keyword">var</span> cookieName = <span class="built_in">encodeURIComponent</span>(name) + <span class="string">"="</span>,
            cookieStart = document.cookie.indexOf(cookieName),
            cookieValue = <span class="literal">null</span>,
            cookieEnd;
            
        <span class="keyword">if</span> (cookieStart &gt; -<span class="number">1</span>){
            cookieEnd = document.cookie.indexOf(<span class="string">";"</span>, cookieStart);
            <span class="keyword">if</span> (cookieEnd == -<span class="number">1</span>){
                cookieEnd = document.cookie.length;
            }
            cookieValue = <span class="built_in">decodeURIComponent</span>(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));
        } 

        <span class="keyword">return</span> cookieValue;
    },
    
    set: <span class="function"><span class="keyword">function</span> <span class="params">(name, value, expires, path, domain, secure)</span> {</span>
      <span class="comment">//设置cookie</span>
        <span class="keyword">var</span> cookieText = <span class="built_in">encodeURIComponent</span>(name) + <span class="string">"="</span> + <span class="built_in">encodeURIComponent</span>(value);
    
        <span class="keyword">if</span> (expires <span class="keyword">instanceof</span> <span class="built_in">Date</span>) {
            cookieText += <span class="string">"; expires="</span> + expires.toGMTString();
        }
    
        <span class="keyword">if</span> (path) {
            cookieText += <span class="string">"; path="</span> + path;
        }
    
        <span class="keyword">if</span> (domain) {
            cookieText += <span class="string">"; domain="</span> + domain;
        }
    
        <span class="keyword">if</span> (secure) {
            cookieText += <span class="string">"; secure"</span>;
        }
    
        document.cookie = cookieText;
    },
    
    unset: <span class="function"><span class="keyword">function</span> <span class="params">(name, path, domain, secure)</span>{</span>
    <span class="comment">//删除cookie通过重新设置cookie，并将失效日期设置为过去的时间。</span>
        <span class="keyword">this</span>.set(name, <span class="string">""</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">0</span>), path, domain, secure);
    }

};
</pre></td></tr></table></figure>

<p>以上就是cookie的小部分内容，学习需要谨慎，基础至关重要。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-04-22T00:59:02.000Z"><a href="/2014/04/22/post6/">4月 22 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/04/22/post6/">滚动篇————附一个简单单的自定义滚动条</a></h1>
  

    </header>
    <div class="entry">
      
        <h1 id="滚动篇">滚动篇</h1>
<p>标签（空格分隔）： javascript CSS</p>
<hr>
<p>好几天没有发文了，这几天考试，所有耽搁了下来。今天说一说滚动的问题。<br>前端学习中，页面滚动是一个很重要的部分。<br>首先要说的是偏移量的问题。先看元素的几个属性<br>1.offsetHeight,offsetWidth:这两个属性是元素在水平和垂直方向所占的空间大小。包含边框。<br>2.offsetLeft,offsetTop:元素相对于包含元素的上、左方向的距离。<br>再看一个问题，客户区的大小，指的是元素内容及其内边距所占的空间大小。不包含边框。用clientWidth,clientHeight表示。<br>最后要介绍的是滚动大小，scrollHeigth,和scrollWidth表示在没有滚动条的情况下，元素内容的总高度和总宽度。scrollLeft,scrollTop，被隐藏的内容区域的像素数。<br>在涉及浏览器的滚动的时候需要注意的是，混杂模式下IE是在body中滚动，而其他的浏览器大多认为是在浏览器的视口中滚动，所以在这里就用做一些兼容问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>scrollHeight = document.documentElement.scrollHeight||document.body.scrollHeight;
</pre></td></tr></table></figure>

<p>接下来通过一个自定义滚动条来进一步讨论这两个问题。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
</pre></td><td class="code"><pre>
&lt;head&gt;
    &lt;script&gt;
window.onload=function(){
    var div3=document.getElementById("div3");
    var div2=document.getElementById('div2');
    var div4=document.getElementById('div4');

    div3.onmousedown=function(e){
      var  e=e||event;

        var yy= e.clientY-div3.offsetTop


        document.onmousemove=function(ev){
         var   e=ev||event;
         var  l = e.clientY-yy;
            if(l&lt;0){
                l=0;
            }else if(l&gt;390){
                l=390   ;
            };
            div3.style.top=l+'px';
            div4.style.top=-l/390*(div4.offsetHeight-400)+'px';

        }
        document.onmouseup=function(){
            document.onmousemove=null;
        }
        return false;
    }
}

    &lt;/script&gt;
    &lt;style type="text/css"&gt;
        #div1{
            width:100px;
            height:400px;
            border:solid black 1px;
            float:left;
            position: relative;
        }
    &lt;/style&gt;
&lt;/head&gt;

&lt;div id="div1" &gt;
    &lt;div id="div4" style="position: absolute;width:100px;overflow:hidden;"&gt;
    # 在此处输入标题

    标签（空格分隔）： 未分类

    ---
    ##javascript中event汇总
    ie firefox chrome opera Safari浏览器中对 event的处理并不一致，在此我将各个浏览器中event的兼容处理做了一个汇总，此处引用的是javascript中的event兼容处理代码。
    
    var EventUtil = {//在这里我们用一个对象来将对event的各种兼容处理封装起来
    //首先是对绑定事件的兼容
    addHandler: function(element, type, handler){
    if (element.addEventListener){
    //DOM2级处理绑定事件方法
    element.addEventListener(type, handler, false);
    } else if (element.attachEvent){
    //IE绑定方法
    element.attachEvent("on" + type, handler);
    } else {
    //DOM0级处理方法（可选，仅支持DOM0级的浏览器似乎已经不存在了）
    element["on" + type] = handler;
    }
    },
    //鼠标按钮的兼容处理
    getButton: function(event){
    if (document.implementation.hasFeature("MouseEvents", "2.0")){//首先检查是否是DOM标准
    return event.button;
    } else {
    //对IE向DOM兼容
    switch(event.button){
    case 0:
    case 1:
    case 3:
    case 5:
    case 7:
    return 0;
    case 2:
    case 6:
    return 2;
    case 4: return 1;
    }
    }
    },
    //获取字符编码
    getCharCode: function(event){
    if (typeof event.charCode == "number"){
    return event.charCode;
    } else {//IE8之前和opera 需要使用keyCode获取字符编码
    return event.keyCode;
    }
    },
    //剪切板的访问
    getClipboardText: function(event){
    var clipboardData =  (event.clipboardData || window.clipboardData);
    return clipboardData.getData("text");
    },
    //得到事件对象
    getEvent: function(event){
    return event ? event : window.event;
    },
    //得到相关元素
    getRelatedTarget: function(event){
    if (event.relatedTarget){
    return event.relatedTarget;
    } else if (event.toElement){
    return event.toElement;
    } else if (event.fromElement){
    return event.fromElement;
    } else {
    return null;
    }

    },
    //得到事件目标
    getTarget: function(event){
    return event.target || event.srcElement;
    },
    //对滑轮事件进行兼容
    getWheelDelta: function(event){
    if (event.wheelDelta){
    return (client.engine.opera && client.engine.opera &lt; 9.5 ? -event.wheelDelta : event.wheelDelta);
    } else {
    return -event.detail * 40;
    }
    },
    //阻止默认事件
    preventDefault: function(event){
    if (event.preventDefault){
    event.preventDefault();
    } else {
    event.returnValue = false;
    }
    },
    //移除事件
    removeHandler: function(element, type, handler){
    if (element.removeEventListener){
    element.removeEventListener(type, handler, false);
    } else if (element.detachEvent){
    element.detachEvent("on" + type, handler);
    } else {
    element["on" + type] = null;
    }
    },
    //设置剪切板内容
    setClipboardText: function(event, value){
    if (event.clipboardData){
    event.clipboardData.setData("text/plain", value);
    } else if (window.clipboardData){
    window.clipboardData.setData("text", value);
    }
    },
    //阻止事件冒泡
    stopPropagation: function(event){
    if (event.stopPropagation){
    event.stopPropagation();
    } else {
    event.cancelBubble = true;
    }
    }

    };
   
    此处添加的事件尚不完全，有待扩充。
    &lt;/div&gt;
&lt;/div&gt;
&lt;div id="div2" style="height:400px;width:10px;border:1px solid black;float:left;position:relative;"&gt;&lt;div id="div3" style="height:10px;width:10px;background:red;position:absolute;top:0px;"&gt;&lt;/div&gt;&lt;/div&gt;
&lt;body&gt;

&lt;/div&gt;
</pre></td></tr></table></figure>

<p><a href="http://www.chinajs.net/test" target="_blank">点击查看实例测试</a><br>在这个自定义滚动条中我们通过设置top来更改元素的位置，不能使用scrollTop因为scrollTop是只读的。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-03-15T12:51:42.000Z"><a href="/2014/03/15/post5/">3月 15 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/03/15/post5/">javascript中的闭包分析</a></h1>
  

    </header>
    <div class="entry">
      
        <p>javascript中利用函数表达式的方式定义函数时，创建了一个函数，并将它赋值给一个变量，创建时，在function后面并没有函数名，故而这种函数叫做匿名函数。而这种方式声明的函数在调用时必须先定义，而声明函数则不需要。这是匿名函数的定义。<br>今天主要要说的是闭包，闭包指的是函数有权访问另一个函数作用域中的变量。创建的方式通常就是在一个函数中创建另一个函数。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>       <span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span><span class="params">(propertyName)</span> {</span>
        
            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(object1, object2)</span>{</span>
                <span class="keyword">var</span> value1 = object1[propertyName];
                <span class="keyword">var</span> value2 = object2[propertyName];
        
                <span class="keyword">if</span> (value1 &lt; value2){
                    <span class="keyword">return</span> -<span class="number">1</span>;
                } <span class="keyword">else</span> <span class="keyword">if</span> (value1 &gt; value2){
                    <span class="keyword">return</span> <span class="number">1</span>;
                } <span class="keyword">else</span> {
                    <span class="keyword">return</span> <span class="number">0</span>;
                }
            };
        }
</pre></td></tr></table></figure>

<p>在这个函数中，新创建了一个函数，因而这个函数在被返回后，无论在哪里调用，都可以访问到变量propertyName。<br>函数的作用域链从自身的arguments和其他参数一致向上追溯到全局环境。因此，在createComparisonFunction函数内部定义的函数的作用域链中会包含createComparisonFunction的活动对象。故而可以访问到propertyName.<br>但是闭包的一个副作用是，当外部函数中的变量发生变化时，闭包只能取得变量的最后一个值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">createFunctions</span><span class="params">()</span>{</span> 
<span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(); 
<span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">10</span>; i++){ 
result[i] = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> 
<span class="keyword">return</span> i; 
}; 
} 
<span class="keyword">return</span> result; 
}
</pre></td></tr></table></figure>

<p>在这个例子中，函数会返回一个函数数组，每个函数返回的实际上都是10.因为，每个函数保存的对变量i的引用都是他的最后状态。<br>匿名函数的执行环节具有全局性，因而其this通常指向window.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="keyword">var</span> name = <span class="string">"The Window"</span>; 
<span class="keyword">var</span> object = { 
name : <span class="string">"My Object"</span>, 
getNameFunc : <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> 
<span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> 
<span class="keyword">return</span> <span class="keyword">this</span>.name; 
}; 
} 
}; 
alert(object.getNameFunc()()); <span class="comment">//"The Window"</span>
</pre></td></tr></table></figure>

<p>在这个例子中闭包的活动对象第一个就是全局对象，所以this指向的是window.<br>在看下面几个例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="keyword">var</span> name = <span class="string">"The Window"</span>; 
<span class="keyword">var</span> object = { 
name : <span class="string">"My Object"</span>, 
getName: <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span> 
<span class="keyword">return</span> <span class="keyword">this</span>.name; 
} 
}; 
object.getName(); <span class="comment">//"My Object" </span>
(object.getName)(); <span class="comment">//"My Object" </span>
(object.getName = object.getName)(); <span class="comment">//"The Window"</span>
</pre></td></tr></table></figure>

<p>第一行代码跟平常一样调用了object.getName()，返回的是”My Object”，因为this.name就是object.name。第二行代码在调用这个方法前先给它加上了括号。虽然加上括号之后，就好像只是在引用一个函数，但this的值得到了维持，因为object.getName和(object.getName)的定义是相同的。第三行代码先执行了一条赋值语句，然后再调用赋值后的结果。因为这个赋值表达式的值是函数本身，所以this的值不能得到维持，结果就返回了”The Window”。<br>以上内容总结自《javascript高级程序设计》</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-03-14T03:26:06.000Z"><a href="/2014/03/14/post4/">3月 14 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/03/14/post4/">javascript中数组对象的方法汇总</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="javascript中数组对象的方法汇总">javascript中数组对象的方法汇总</h2>
<hr>
<p>上次我们说了对字符串的操作方法，现在继续总结数组的方法。<br>1.Array.isArray()<br>此方法为检查对象是否为数组对象。接受一个参数，判断参数是否为数组，若为数组，则返回true,反之返回false。<br>2.toString(),toLocaleString()<br>这两个方法通常都返回数组的字符串形式，其中toString()会对每一项调用toString()方法，而toLocaleString()则会对每一项调用toLocaleString()方法。两种方法都返回数组中每个值的字符串形式拼接成的用逗号分隔的字符串。<br>3.valueOf()<br>方法依旧返回原来的数组。<br>4.push(),pop()<br>这两个方法被称为栈方法，原因是LIFO（last-in-first-out）,其中push()方法接受任意数量参数，并会将参数逐个推入数组的末尾，并返回更改后数组的长度。pop()方法则是在数组的末尾删除最后一项，并返回移除的项。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre>    <span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>();                    <span class="comment">//create an array</span>
    <span class="keyword">var</span> count = colors.push(<span class="string">"red"</span>, <span class="string">"green"</span>);      <span class="comment">//push two items</span>
        alert(count);  <span class="comment">//2</span>
        
    count = colors.push(<span class="string">"black"</span>);        <span class="comment">//push another item on</span>
        alert(count);  <span class="comment">//3</span>
        
     <span class="keyword">var</span> item = colors.pop();           <span class="comment">//get the last item</span>
        alert(item);   <span class="comment">//"black"</span>
        alert(colors.length);  <span class="comment">//2</span>
</pre></td></tr></table></figure>

<p>5.unshift(),shift()<br>这两个方法正好与push()和pop()方法相反，操作的是数组的前端。其中unshift()方法接受任意数量参数，并会将参数逐个推入数组的末尾，并返回更改后数组的长度。shift()方法则是在数组的末尾删除最后一项，并返回移除的项。<br>6.reverse()<br>调用这个方法，会将数组的顺序翻转过来。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>  <span class="keyword">var</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];
        values.reverse();
        alert(values);       <span class="comment">//5,4,3,2,1</span>
</pre></td></tr></table></figure>

<p>7.sort()<br>这个方法同样也是一个排序方法，在不接受参数的情况下默认按照字符串的升序排列。注意，这里无论数组元素是什么类型的，都会按照字符串的形式来排序。sort()方法也接受一个函数来作为参数，这个函数被称为比较函数。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre> <span class="keyword">var</span> values = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>];
        values.sort();
        alert(values);    <span class="comment">//0,1,10,15,5</span>
          <span class="function"><span class="keyword">function</span> <span class="title">compare</span><span class="params">(value1, value2)</span> {</span>
            <span class="keyword">if</span> (value1 &lt; value2) {
                <span class="keyword">return</span> -<span class="number">1</span>;
            } <span class="keyword">else</span> <span class="keyword">if</span> (value1 &gt; value2) {
                <span class="keyword">return</span> <span class="number">1</span>;
            } <span class="keyword">else</span> {
                <span class="keyword">return</span> <span class="number">0</span>;
            }
        }
        
        <span class="keyword">var</span> values = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>];
        values.sort(compare);
        alert(values);    <span class="comment">//0,1,5,10,15</span>
</pre></td></tr></table></figure>

<p>8.concat()<br>这个方法会建立一个新的数组副本，会将参数中的每一项添加到调用该方法的数组副本中，若参数为数组则会将数组中的每一项添加到副本中，返回新的数组副本，同时并不对原有的数组修改。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>   <span class="keyword">var</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>];
        <span class="keyword">var</span> colors2 = colors.concat(<span class="string">"yellow"</span>, [<span class="string">"black"</span>, <span class="string">"brown"</span>]);
        
        alert(colors);     <span class="comment">//red,green,blue        </span>
        alert(colors2);    <span class="comment">//red,green,blue,yellow,black,brown</span>
</pre></td></tr></table></figure>

<p>9.slice()<br>slice()方法是对数组的截取，接受两个参数第二个参数可选，返回截取的数组片段，并不会对原有数组产生影响。需要注意的是，第二个参数时需要截取位置的后一个位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>  <span class="keyword">var</span> colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>, <span class="string">"yellow"</span>, <span class="string">"purple"</span>];
        <span class="keyword">var</span> colors2 = colors.slice(<span class="number">1</span>);
        <span class="keyword">var</span> colors3 = colors.slice(<span class="number">1</span>,<span class="number">4</span>);
        
        alert(colors2);   <span class="comment">//green,blue,yellow,purple</span>
        alert(colors3);   <span class="comment">//green,blue,yellow</span>
</pre></td></tr></table></figure>

<p>10.splice()<br>这个方法有很多种用法首先第一种：<br>删除：<br>指定两个参数，需要删除的第一项的位置和要删除的项数。返回移除的项</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> colors = [<span class="string">"yellow"</span>,<span class="string">"red"</span>,<span class="string">"blue"</span>];
<span class="keyword">var</span> removed = colors.splice(<span class="number">0</span>,<span class="number">1</span>);
alert(colors);<span class="comment">//red,blue</span>
alert(removed);<span class="comment">//yellow</span>
</pre></td></tr></table></figure>

<p>插入：指定任意多参数，第一个参数为要插入的位置，第二个参数为0（删除0项），接下来可以使任意多个要插入的项。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> colors = [<span class="string">"yellow"</span>,<span class="string">"red"</span>,<span class="string">"blue"</span>];
colors.splice(<span class="number">1</span>,<span class="number">0</span>,<span class="string">"red"</span>,<span class="string">"black"</span>);
alert(colors)<span class="comment">//yellow,red,blue,red,black</span>
</pre></td></tr></table></figure>

<p>替换：同样指定任意多参数，起始位置，删除数目，添加项。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre> removed = colors.splice(<span class="number">1</span>, <span class="number">1</span>, <span class="string">"red"</span>, <span class="string">"purple"</span>);
        alert(colors);     <span class="comment">//green,red,purple,orange,blue</span>
        alert(removed);    <span class="comment">//yellow - one item array</span>
</pre></td></tr></table></figure>

<p>11.indexOf()，lastIndexOf()<br>两个方法都接受两个参数，要查找的项和开始查找的位置（可选），返回所查找的位置，若没有找到则返回-1.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre>   <span class="keyword">var</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>];
        
        alert(numbers.indexOf(<span class="number">4</span>));        <span class="comment">//3</span>
        alert(numbers.lastIndexOf(<span class="number">4</span>));    <span class="comment">//5</span>
        
        alert(numbers.indexOf(<span class="number">4</span>, <span class="number">4</span>));     <span class="comment">//5</span>
        alert(numbers.lastIndexOf(<span class="number">4</span>, <span class="number">4</span>)); <span class="comment">//3       </span>

        <span class="keyword">var</span> person = { name: <span class="string">"Nicholas"</span> };
        <span class="keyword">var</span> people = [{ name: <span class="string">"Nicholas"</span> }];
        <span class="keyword">var</span> morePeople = [person];
        
        alert(people.indexOf(person));     <span class="comment">//-1</span>
        alert(morePeople.indexOf(person)); <span class="comment">//0</span>
</pre></td></tr></table></figure>

<p>12.every(),filter(),forEach(),map(),some()<br>这几种方法都是迭代方法<br>every()：对数组中的每一项运行给定函数，如果该函数对每一项都返回true，则返回true。<br>filter()：对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组。<br>forEach()：对数组中的每一项运行给定函数。这个方法没有返回值。<br>map()：对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。<br>some()：对数组中的每一项运行给定函数，如果该函数对任一项返回true，则返回true。<br>以上方法都不会修改数组中的包含的值。<br>13.reduce(),reduceRight()<br>这两个方法都会迭代数组的所有项，然后构建一个最终返回的值。其中，reduce()方法从数组的第一项开始，逐个遍历到最后。而reduceRight()则从数组的最后一项开始，向前遍历到第一项。参数为一个函数，用于处理数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="keyword">var</span> values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]; 
<span class="keyword">var</span> sum = values.reduce(<span class="function"><span class="keyword">function</span><span class="params">(prev, cur, index, array)</span>{</span> 
<span class="keyword">return</span> prev + cur; 
}); 
alert(sum); <span class="comment">//15</span>
<span class="keyword">var</span> values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]; 
<span class="keyword">var</span> sum = values.reduceRight(<span class="function"><span class="keyword">function</span><span class="params">(prev, cur, index, array)</span>{</span> 
<span class="keyword">return</span> prev + cur; 
}); 
alert(sum); <span class="comment">//15</span>
</pre></td></tr></table></figure>

<p>以上部分内容摘自《javascript高级程序设计》</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-03-13T07:42:06.000Z"><a href="/2014/03/13/post3/">3月 13 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/03/13/post3/">javascript中对字符串的操作总结</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="javascript中对字符串的操作总结">javascript中对字符串的操作总结</h2>
<p>没听过一句话吗？程序员的世界，不处理字符串就是处理数组。这是群里的一位前辈和我说的，显然这和我之前理解的DOM是javascript的核心的不同的，看了几个面试题的内容，感觉前辈说的话非常的有道理，因此总结下，javascript中对字符串的操作。</p>
<h3 id="String类型">String类型</h3>
<p>首先字符串类型是基本类型，但是在这里我们所说的是字符串的对象包装类型。因为只有引用类型才会有属性和方法。实际上每读取一个基本类型的同时都会创建一个对应的基本包装类型，从而让我们能够调用一些方法来操作数据。<br>1.charAt() 和 charCodeAt()<br>两个方法都接受一个索引参数，charAt()返回对应索引的字符，charCodeAt()返回对应字符的字符编码。<br>2.concat()<br>用于将一个或多个字符串拼接起来，返回拼接得到的新字符串。<br>eg:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> str1 = <span class="string">'111'</span>;
<span class="keyword">var</span> result = str1.concat(<span class="string">'abcd'</span>,<span class="string">'dsas'</span>);<span class="comment">//结果111abcddsas</span>
</pre></td></tr></table></figure>

<p>3.slice()、substr()、substring()<br>这三个方法都是对字符串的截取。且都接受一个或两个参数。他们的第一个参数都表示起始位置。<br>(1) slice()的第二个参数指定需要截取的位置的后面的字符索引。如果没有第二个参数则字符串长度作为结束位置。当传入负值时，会将负值与字符串的长度相加。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> str1 = <span class="string">"hello world"</span>
alert(str1.slice(<span class="number">3</span>));<span class="comment">//不传第二个参数时默认为字符串长度结果：lo world</span>
alert(str1.slice(<span class="number">3</span>,<span class="number">7</span>));<span class="comment">//lo w</span>
alert(str1.slice(-<span class="number">3</span>));<span class="comment">//传入负值与字符串长度相加结果：rld</span>
alert(str1.slice(<span class="number">3</span>,-<span class="number">7</span>));<span class="comment">//结果:l</span>
</pre></td></tr></table></figure>

<p>(2) substring()的第二个参数指定需要截取的位置的后面的字符索引。如果没有第二个参数则字符串长度作为结束位置。当传入负值时，会将所有负值转换成0.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> str1 = <span class="string">"hello world"</span>
alert(str1.substring(<span class="number">3</span>));<span class="comment">//不传第二个参数时默认为字符串长度结果：lo world</span>
alert(str1.substring(<span class="number">3</span>,<span class="number">7</span>));<span class="comment">//lo w</span>
alert(str1.substring(-<span class="number">3</span>));<span class="comment">//第一个参数为负值转换为0第二个默认为字符串长度，结果：hello world</span>
alert(str1.substring(<span class="number">3</span>,-<span class="number">7</span>))<span class="comment">//结果：hel</span>
</pre></td></tr></table></figure>

<p>(3)substr()的第二个参数时指定的截取长度，如果没有第二个参数则字符串长度作为结束位置。当传入负值时，会将第一个参数加上字符串的长度，而第二个参数转换为0.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> str1 = <span class="string">"hello world"</span>
alert(str1.substr(<span class="number">3</span>));<span class="comment">//不传第二个参数时默认为字符串长度结果：lo world</span>
alert(str1.substr(<span class="number">3</span>,<span class="number">7</span>))<span class="comment">//结果：lo worl</span>
alert(str1.substr(-<span class="number">3</span>))<span class="comment">//结果//rld</span>
alert(str1.substr(<span class="number">3</span>,-<span class="number">7</span>))<span class="comment">//结果：""</span>
</pre></td></tr></table></figure>

<p>4.indexOf()、lastIndexOf()<br>这两个方法都接受两个参数，第一个参数时要确定位置的子字符串，第二个参数可选，是开始搜索的位置。方法，返回该子字符串的位置，如果未找到，则返回-1。indexOf()是从开头开始搜索，而lastIndexOf()则是从末尾向前搜索。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> str1 = <span class="string">"hello world"</span>;
alert(str1.indexOf(<span class="string">"o"</span>));<span class="comment">//4</span>
alert(str1.lastIndexOf(<span class="string">"0"</span>));<span class="comment">//7</span>
alert(str1.indexOf(<span class="string">"a"</span>))<span class="comment">//-1</span>
alert(str1.indexOf(<span class="string">"o"</span>,<span class="number">6</span>));<span class="comment">//7</span>
alert(str1.lastIndexOf(<span class="string">"o"</span>,<span class="number">6</span>));<span class="comment">//4</span>
</pre></td></tr></table></figure>

<p>5.trim()<br>trim()用于去除字符串两边的空格。<br>6.toLowerCase()、toUpperCase()<br>这两种方法用于转换字符串的大小写。直接看例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> str1 = <span class="string">"hello world"</span>
<span class="keyword">var</span> str2 = <span class="string">"HELLO WORLD"</span>
alert(str1.toUpperCase());<span class="comment">//HELLO WORLD</span>
alert(str2.toLowerCase());<span class="comment">//hello world</span>
</pre></td></tr></table></figure>

<p>此外还有toLocaleLowerCase(),和toLocaleUpperCase()方法，与这两种方法类似。<br>7.match()<br>match()方法类似于正则中的exec(),接受一个参数，参数为正则表达式或者字符串。返回一个数组。数组内容与调用exec()方法一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>  <span class="keyword">var</span> text = <span class="string">"cat, bat, sat, fat"</span>; 
        <span class="keyword">var</span> pattern = <span class="regexp">/.at/</span>;
        
        <span class="keyword">var</span> matches = text.match(pattern);        
        alert(matches.index);        <span class="comment">//0</span>
        alert(matches[<span class="number">0</span>]);           <span class="comment">//"cat"</span>
        alert(pattern.lastIndex);    <span class="comment">//0</span>
</pre></td></tr></table></figure>

<p>8.search()<br>search()方法与match()方法参数一致，返回第一个匹配项的索引，如果没有匹配到则返回-1，始终从开头向后查找。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> text = <span class="string">"cat, bat, sat, fat"</span>; 
<span class="keyword">var</span> pos = text.search(<span class="regexp">/at/</span>);
        alert(pos);   <span class="comment">//1</span>
</pre></td></tr></table></figure>

<p>9.replace()<br>replace()方法接受两个参数，第一个参数可以是一个正则对象或者一个字符串，第二个参数可以使一个字符串或者一个函数。如果第一个参数为字符串，则返回由第二个参数替换调用字符串中子字符串的字符串。且只会替换第一个。若想全局替换，则需要使用正则，且要指定全局。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> text = <span class="string">"cat, bat, sat, fat"</span>; 
<span class="keyword">var</span> result = text.replace(<span class="string">"at"</span>, <span class="string">"ond"</span>);
        alert(result);    <span class="comment">//"cond, bat, sat, fat"</span>

        result = text.replace(<span class="regexp">/at/g</span>, <span class="string">"ond"</span>);
        alert(result);    <span class="comment">//"cond, bond, sond, fond"</span>
</pre></td></tr></table></figure>

<p>10.split()<br>这个方法会根据一个分隔符将一个字符串分割成多个子字符串并将结果放进一个数组。方法也可以接受第二个参数用来指定结果数组的大小。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> colorText = <span class="string">"red,blue,green,yellow"</span>;
        <span class="keyword">var</span> colors1 = colorText.split(<span class="string">","</span>);      <span class="comment">//["red", "blue", "green", "yellow"]</span>
        <span class="keyword">var</span> colors2 = colorText.split(<span class="string">","</span>, <span class="number">2</span>);   <span class="comment">//["red", "blue"]</span>
        <span class="keyword">var</span> colors3 = colorText.split(<span class="regexp">/[^\,]+/</span>); <span class="comment">//["", ",", ",", ",", ""]</span>
</pre></td></tr></table></figure>

<p>此外还有formCharCode()方法用于将字符编码转换为字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>alert(<span class="built_in">String</span>.fromCharCode(<span class="number">104</span>, <span class="number">101</span>, <span class="number">108</span>, <span class="number">108</span>, <span class="number">111</span>)); <span class="comment">//"hello"</span>
</pre></td></tr></table></figure>

<p>以上为部分字符串方法。总结于《javascript高级程序设计》</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-03-12T12:06:06.000Z"><a href="/2014/03/12/post2/">3月 12 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/03/12/post2/">javascript中创建对象的几种方式</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="javascript中创建对象的几种方式">javascript中创建对象的几种方式</h2>
<hr>
<p>javascript中提供了通过Object构造函数或对象字面量方式来创建单个的对象，当我们想要创建很多对象的时候，简单的通过这两种方法就会产生大量的重复。在此，我总结了几种创建对象的模式。本文是在我阅读《javascript高级程序设计》后总结而来。</p>
<h3 id="1-工厂模式">1.工厂模式</h3>
<p>这种模式通过用函数来减少代码重复，利用函数的参数作为接口，与对象的属性与方法对接。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">createfactory</span><span class="params">(name,age)</span>{</span>
    <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();
    obj.name = name;
    obj.age = age;
    <span class="keyword">return</span> obj;
}
<span class="keyword">var</span> test1 = createfactory(<span class="string">'aaa'</span>,<span class="number">18</span>);
<span class="keyword">var</span> test2 = createfactory(<span class="string">'bbb'</span>,<span class="number">50</span>);
</pre></td></tr></table></figure>

<p>这样就完成了简单的代码复用，实现了代码重复，但是无法确定所创建对象的类型。</p>
<h3 id="构造函数模式">构造函数模式</h3>
<p>我们都知道Object,Array等原生的构造函数可以用来创建对象。构造函数模式和此类似，通过自定义创建构造函数，来创建新类型的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Createfunction</span><span class="params">(name,age，)</span>{</span>
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>. age = gae;
    <span class="keyword">this</span>.sayname = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        alert(<span class="keyword">this</span>.name);
    }
}
<span class="keyword">var</span> test1 = <span class="keyword">new</span> Createfunction(<span class="string">'aaa'</span>,<span class="number">20</span>);
<span class="keyword">var</span> test2 = <span class="keyword">new</span> Createfunction(<span class="string">'bbb'</span>,<span class="number">50</span>);
</pre></td></tr></table></figure>

<p>按照惯例，构造函数应以一个大写字母开头。这种模式可以将新对象的类型确定下来。然后这种模式依旧存在问题，test1和test2两个实例中都有sayname方法，在javascript中函数就是对象，因此在创建test1和test2的同时也实例化了两次函数对象，相当于这样：</p>
<figure class="highlight new"><figcaption><span>Function("alert(this.name)") ```。</span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>
###原型模式
每个函数都有一个prototype属性，指向它的原型对象。原型对象可以让所有对象实例共享其中的属性和方法。看下面的例子。
```javascript
<span class="function"><span class="keyword">function</span> <span class="title">Cf</span><span class="params">()</span>{</span>}
Cf.prototype.name = <span class="string">"aaa"</span>;
Cf.prototype.age = <span class="number">29</span>;
Cf.prototype.sayname = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    alert(<span class="keyword">this</span>.name);
    }
<span class="keyword">var</span> test1 = <span class="keyword">new</span> Createfunction();
<span class="keyword">var</span> test2 = <span class="keyword">new</span> Createfunction();
</pre></td></tr></table></figure>

<p>上面这种方法通过将属性和方法添加到了构造函数的原型对象中，这样新对象的所有实例会共享这些属性和方法。<br>为了进一步减少代码量，有人提出了重写原型对象的方法。看下面的例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Cf</span><span class="params">()</span>{</span>}
Cf.prototype = {
    name = <span class="string">"aaa"</span>;
    age = <span class="number">29</span>;
    sayname = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
        alert(<span class="keyword">this</span>.name);
    }
}
<span class="keyword">var</span> test1 = <span class="keyword">new</span> Createfunction();
<span class="keyword">var</span> test2 = <span class="keyword">new</span> Createfunction();
</pre></td></tr></table></figure>

<p>这种方法通过重写原型对象进一步减少代码重复，然而这样的写法带来了新的问题。<br>在简单的通过原型模式创建对象时，原型对象的动态变化会实时的反应在实例中，因为实例中的[[Prototype]]属性是指向原型对象的，这样对于调用属性和方法的向上搜索过程，会搜寻到原型对象中的属性和方法。而当先实例化一个对象后，再重写原型对象，实例中的[[Prototype]]不再指向新的原型对象，因而导致在调用的过程中无法向上搜索到新的原型对象，所以在使用重写原型对象方法的时候，一定要先重写对象，再创建实例。<br>原型对象模式依旧存在缺点，虽然它省略了为函数传参这一环节，但是实例默认情况下都取得相同的属性值。此外对于包含引用类型的属性来说，当对实例属性修改会导致原型对象中属性的同步变化。这样，这种变化也就实时的反应在了所有的实例中。显然这不是我们想要的结果。<br>联系前面说的构造函数模式，我们可以通过组合使用构造函数模式和原型模式来解决这一问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name, age, job)</span>{</span>
            <span class="keyword">this</span>.name = name;
            <span class="keyword">this</span>.age = age;
            <span class="keyword">this</span>.job = job;
            <span class="keyword">this</span>.friends = [<span class="string">"Shelby"</span>, <span class="string">"Court"</span>];
        }
        
        Person.prototype = {
            constructor: Person,
            sayName : <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                alert(<span class="keyword">this</span>.name);
            }
        };
        
        <span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Nicholas"</span>, <span class="number">29</span>, <span class="string">"Software Engineer"</span>);
        <span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);
</pre></td></tr></table></figure>

<p>在构造函数中定义实例属性，在原型模式中定义方法和共享的属性。这样，每个实例都有自己的实例属性的副本，同时也有共享的属性和方法，节省了内存，也可以通过传参来定义实例属性。</p>
<h3 id="动态原型模式">动态原型模式</h3>
<p>动态原型模式其实相当于原型模式的一个变种，将所有的信息都封装在构造函数中，仅在必要的情况下初始化原型对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name, age, job)</span>{</span>
        
            <span class="comment">//properties</span>
            <span class="keyword">this</span>.name = name;
            <span class="keyword">this</span>.age = age;
            <span class="keyword">this</span>.job = job;
            
            <span class="comment">//methods</span>
            <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.sayName != <span class="string">"function"</span>){
            
                Person.prototype.sayName = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
                    alert(<span class="keyword">this</span>.name);
                };
                
            }
        }

        <span class="keyword">var</span> friend = <span class="keyword">new</span> Person(<span class="string">"Nicholas"</span>, <span class="number">29</span>, <span class="string">"Software Engineer"</span>);
        friend.sayName();
</pre></td></tr></table></figure>

<p>在这个构造函数中通过判断属性是否存在来决定是否对原型对象初始化。这样只有在第一次实例化对象时才会对原型对象初始化，可以说是十分的完美了。</p>
<h3 id="寄生构造函数模式">寄生构造函数模式</h3>
<p>当我们想为一个已经存在的构造函数创建一个具有额外方法的构造函数，由于不能重写存在的构造函数，这时就可以使用这种模式了。看例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>       <span class="function"><span class="keyword">function</span> <span class="title">SpecialArray</span><span class="params">()</span>{</span>       
 
            <span class="comment">//create the array</span>
            <span class="keyword">var</span> values = <span class="keyword">new</span> <span class="built_in">Array</span>();
            
            <span class="comment">//add the values</span>
            values.push.apply(values, <span class="built_in">arguments</span>);
            
            <span class="comment">//assign the method</span>
            values.toPipedString = <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
                <span class="keyword">return</span> <span class="keyword">this</span>.join(<span class="string">"|"</span>);
            };
            
            <span class="comment">//return it</span>
            <span class="keyword">return</span> values;        
        }
        
        <span class="keyword">var</span> colors = <span class="keyword">new</span> SpecialArray(<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>);
</pre></td></tr></table></figure>

<p>这个例子中，创建了一个具有额外方法的数组，具有额外的特殊方法，在不修改数组构造函数的前提下，创建了一个新的构造函数。不过寄生构造函数模式返回的对象与构造函数的原型对象没有关系。</p>
<p>以上为我总结的创建对象的几种方法，还有一种稳妥构造函数模式，适用于安全环境中，在此就不做介绍了。<br>以上内容均为阅读《javascript高级程序设计》总结而来。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-03-11T09:58:50.000Z"><a href="/2014/03/11/post1/">3月 11 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/03/11/post1/">javascript中event汇总</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="javascript中event汇总">javascript中event汇总</h2>
<p>ie firefox chrome opera Safari浏览器中对 event的处理并不一致，在此我将各个浏览器中event的兼容处理做了一个汇总，此处引用的是javascript中的event兼容处理代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
</pre></td><td class="code"><pre><span class="keyword">var</span> EventUtil = {<span class="comment">//在这里我们用一个对象来将对event的各种兼容处理封装起来</span>
<span class="comment">//首先是对绑定事件的兼容</span>
    addHandler: <span class="function"><span class="keyword">function</span><span class="params">(element, type, handler)</span>{</span>
        <span class="keyword">if</span> (element.addEventListener){
        <span class="comment">//DOM2级处理绑定事件方法</span>
            element.addEventListener(type, handler, <span class="literal">false</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent){
        <span class="comment">//IE绑定方法</span>
            element.attachEvent(<span class="string">"on"</span> + type, handler);
        } <span class="keyword">else</span> {
        <span class="comment">//DOM0级处理方法（可选，仅支持DOM0级的浏览器似乎已经不存在了）</span>
            element[<span class="string">"on"</span> + type] = handler;
        }
    },
    <span class="comment">//鼠标按钮的兼容处理</span>
    getButton: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">if</span> (document.implementation.hasFeature(<span class="string">"MouseEvents"</span>, <span class="string">"2.0"</span>)){<span class="comment">//首先检查是否是DOM标准</span>
            <span class="keyword">return</span> event.button;
        } <span class="keyword">else</span> {
     <span class="comment">//对IE向DOM兼容</span>
            <span class="keyword">switch</span>(event.button){
                <span class="keyword">case</span> <span class="number">0</span>:
                <span class="keyword">case</span> <span class="number">1</span>:
                <span class="keyword">case</span> <span class="number">3</span>:
                <span class="keyword">case</span> <span class="number">5</span>:
                <span class="keyword">case</span> <span class="number">7</span>:
                    <span class="keyword">return</span> <span class="number">0</span>;
                <span class="keyword">case</span> <span class="number">2</span>:
                <span class="keyword">case</span> <span class="number">6</span>:
                    <span class="keyword">return</span> <span class="number">2</span>;
                <span class="keyword">case</span> <span class="number">4</span>: <span class="keyword">return</span> <span class="number">1</span>;
            }
        }
    },
    <span class="comment">//获取字符编码</span>
    getCharCode: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">if</span> (<span class="keyword">typeof</span> event.charCode == <span class="string">"number"</span>){
            <span class="keyword">return</span> event.charCode;
        } <span class="keyword">else</span> {<span class="comment">//IE8之前和opera 需要使用keyCode获取字符编码</span>
            <span class="keyword">return</span> event.keyCode;
        }
    },
    <span class="comment">//剪切板的访问</span>
    getClipboardText: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">var</span> clipboardData =  (event.clipboardData || window.clipboardData);
        <span class="keyword">return</span> clipboardData.getData(<span class="string">"text"</span>);
    },
    <span class="comment">//得到事件对象</span>
    getEvent: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">return</span> event ? event : window.event;
    },
    <span class="comment">//得到相关元素</span>
    getRelatedTarget: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">if</span> (event.relatedTarget){
            <span class="keyword">return</span> event.relatedTarget;
        } <span class="keyword">else</span> <span class="keyword">if</span> (event.toElement){
            <span class="keyword">return</span> event.toElement;
        } <span class="keyword">else</span> <span class="keyword">if</span> (event.fromElement){
            <span class="keyword">return</span> event.fromElement;
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> <span class="literal">null</span>;
        }

    },
    <span class="comment">//得到事件目标</span>
    getTarget: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">return</span> event.target || event.srcElement;
    },
    <span class="comment">//对滑轮事件进行兼容</span>
    getWheelDelta: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">if</span> (event.wheelDelta){
            <span class="keyword">return</span> (client.engine.opera && client.engine.opera &lt; <span class="number">9.5</span> ? -event.wheelDelta : event.wheelDelta);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> -event.detail * <span class="number">40</span>;
        }
    },
    <span class="comment">//阻止默认事件</span>
    preventDefault: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">if</span> (event.preventDefault){
            event.preventDefault();
        } <span class="keyword">else</span> {
            event.returnValue = <span class="literal">false</span>;
        }
    },
    <span class="comment">//移除事件</span>
    removeHandler: <span class="function"><span class="keyword">function</span><span class="params">(element, type, handler)</span>{</span>
        <span class="keyword">if</span> (element.removeEventListener){
            element.removeEventListener(type, handler, <span class="literal">false</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (element.detachEvent){
            element.detachEvent(<span class="string">"on"</span> + type, handler);
        } <span class="keyword">else</span> {
            element[<span class="string">"on"</span> + type] = <span class="literal">null</span>;
        }
    },
    <span class="comment">//设置剪切板内容</span>
    setClipboardText: <span class="function"><span class="keyword">function</span><span class="params">(event, value)</span>{</span>
        <span class="keyword">if</span> (event.clipboardData){
            event.clipboardData.setData(<span class="string">"text/plain"</span>, value);
        } <span class="keyword">else</span> <span class="keyword">if</span> (window.clipboardData){
            window.clipboardData.setData(<span class="string">"text"</span>, value);
        }
    },
    <span class="comment">//阻止事件冒泡</span>
    stopPropagation: <span class="function"><span class="keyword">function</span><span class="params">(event)</span>{</span>
        <span class="keyword">if</span> (event.stopPropagation){
            event.stopPropagation();
        } <span class="keyword">else</span> {
            event.cancelBubble = <span class="literal">true</span>;
        }
    }

};
</pre></td></tr></table></figure>

<p>此处添加的事件尚不完全，有待扩充。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:http:chinajs.net">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/blog/">blog</a><small>2</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/CSS/">CSS</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>8</small></li>
  
    <li><a href="/tags/javascript，blog/">javascript，blog</a><small>1</small></li>
  
    <li><a href="/tags/javascript，前端/">javascript，前端</a><small>1</small></li>
  
    <li><a href="/tags/jquery/">jquery</a><small>1</small></li>
  
    <li><a href="/tags/前端/">前端</a><small>7</small></li>
  
    <li><a href="/tags/图片/">图片</a><small>1</small></li>
  
    <li><a href="/tags/放大镜/">放大镜</a><small>1</small></li>
  
  </ul>
</div>


  <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1658280575&verifier=8d4c0fdc&dpc=1"></iframe>

  <div class="widget tag">
<h3 class="title">友情链接</h3>
<ul class="entry">
<li><a href="http://www.colorfulsummer.com/" title=summer's Blog">彩色夏天</a></li>
<li><a href="http://www.cnblogs.com/echoRadish/" title="my Blog">兔子小姐的萝卜先生</a></li>
</ul>
</div>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 萝卜先生
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>